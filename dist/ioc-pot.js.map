{"version":3,"sources":["webpack://IocPot/webpack/universalModuleDefinition","webpack://IocPot/./index.js","webpack://IocPot/./src/ioc/callableHash.js","webpack://IocPot/./src/ioc/constructable.js","webpack://IocPot/./src/ioc/container.js","webpack://IocPot/./src/ioc/factory.js","webpack://IocPot/./src/ioc/ingredient.js","webpack://IocPot/./src/ioc/provider.js","webpack://IocPot/./src/ioc/recipe.js","webpack://IocPot/./src/ioc/resolver.js","webpack://IocPot/./src/ioc/throwable.js","webpack://IocPot/webpack/bootstrap","webpack://IocPot/webpack/runtime/define property getters","webpack://IocPot/webpack/runtime/hasOwnProperty shorthand","webpack://IocPot/webpack/runtime/make namespace object","webpack://IocPot/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;ACVgD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA6B;;AAE7E;AACA,cAAc,cAAc;AAC5B;;AAEA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;;AAEA,mBAAmB,6BAA6B;AAChD;AACA;;AAEA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA,sBAAsB,6DAAkB;AACxC;AACA;AACA;;AAEA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA,sBAAsB,kEAAuB;AAC7C;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA,mBAAmB,2BAA2B;AAC9C;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;ACJyC;AACF;AACV;AACqB;;AAElD;;AAEP;;AAEA,mBAAmB,+BAA+B;AAClD,6BAA6B,0DAAY;;AAEzC,mBAAmB,uBAAuB;AAC1C;;AAEA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,cAAc;AAC7B;AACA;AACA,0BAA0B,8CAAM,yBAAyB,wDAAc;AACvE;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B,yDAAe;AAC7C;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,uBAAuB,8CAAM;AAC7B,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;;;;AC3EqD;;AAErD;AACA;AACA;AACA;AACO;;AAEP;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA,kBAAkB,8DAAmB;AACrC;AACA;;;;;;;;;;;;;;;;ACfwC;;AAExC;AACA;AACA;AACO;;AAEP;AACA;AACA,eAAe,OAAO;AACtB,eAAe,4BAA4B;AAC3C,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClBkD;AACE;;AAEpD;AACA;AACA;AACA;AACO;;AAEP;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA,kBAAkB,8DAAmB;AACrC;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACO;;AAEP;AACA,mBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA,kBAAkB,8DAAmB;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AChF4C;AACC;AACL;AACY;;AAEpD;AACA;AACA;AACO;;AAEP;AACA;AACA,eAAe,OAAO;AACtB,eAAe,cAAc;AAC7B,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,mCAAmC;AAClD,iBAAiB,c;AACjB;AACA;AACA;AACA,sBAAsB,8DAAmB;AACzC;;AAEA;AACA,mBAAmB,sDAAU;AAC7B;;AAEA;AACA,eAAe,mCAAmC;AAClD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC3CuC;AACM;AACI;AACZ;AAC0E;;AAExG;;AAEP;AACA;AACA,eAAe,mCAAmC;AAClD;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;;AAEA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACO;;AAEP;;AAEA;AACA,eAAe,+BAA+B;AAC9C,iBAAiB;AACjB;AACA;;AAEA,mBAAmB,mCAAmC;AACtD,gCAAgC,0DAAY;;AAE5C;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,0BAA0B,0DAAe;AACzC;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7EO;;AAEP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;;;;;;;UC9CA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"ioc-pot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"IocPot\"] = factory();\n\telse\n\t\troot[\"IocPot\"] = factory();\n})(self, function() {\nreturn ","export { Container as Pot } from \"./src/api.js\";\n","import { DuplicateNameError, IngredientNotFoundError } from \"./throwable.js\";\n\n/**\n * @typedef {{name: string}} Callable\n */\n\n/**\n * @template T\n */\nexport class CallableHash {\n\n    /**\n     *\n     */\n    constructor() {\n\n        /** @type {Object<string, T & Callable>} */\n        this.__hash = {};\n    }\n\n    /**\n     * @param {T & Callable} callable\n     */\n    put(callable) {\n        if(this.__hash[callable.name]){\n            throw new DuplicateNameError()\n        }\n        this.__hash[callable.name] = callable;\n    }\n\n    /**\n     * @param {Array<T & Callable>} callables\n     */\n    putAll(callables){\n        callables.forEach(callable => {\n            this.put(callable)\n        })\n    }\n\n    /**\n     *\n     * @param {string} name\n     * @returns {T & Callable}\n     */\n    get(name) {\n\n        const result = this.__hash[name];\n        if (result === undefined) {\n            throw new IngredientNotFoundError();\n        }\n        return result;\n    }\n\n    /**\n     *\n     * @param {string} name\n     * @returns {T & Callable}\n     */\n    delete(name) {\n        const callable = this.get(name)\n        delete this.__hash[name]\n        return callable\n    }\n\n    /**\n     *\n     * @param {string} name\n     * @returns {boolean}\n     */\n    exist(name) {\n        return this.__hash[name] !== undefined;\n    }\n\n    /**\n     * @param {function(T & Callable): void} callback\n     */\n    forEach(callback) {\n        Object.keys(this.__hash).forEach(name => {\n            callback(this.__hash[name])\n        })\n    }\n\n    /**\n     * @returns {CallableHash<T & Callable>}\n     */\n    duplicate(){\n        /** @type {CallableHash<T & Callable>} */\n        const callableHash = new CallableHash()\n\n        this.forEach(t => {\n            callableHash.put(t)\n        })\n\n        return callableHash\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    hasAny(){\n        return this.size() !== 0\n    }\n\n    /**\n     * @returns {Number}\n     */\n    size(){\n        return Object.keys(this.__hash).length\n    }\n}\n","/**\n * @template T\n * @interface\n */\nexport class Constructable{}\n","import { CallableHash } from \"./callableHash.js\"\nimport { NormalProvider } from \"./provider.js\"\nimport { Recipe } from \"./recipe.js\"\nimport { Resolver, ResolverFactory } from \"./resolver.js\"\n\nexport class Container {\n\n    constructor(){\n\n        /** @type {CallableHash<Recipe<Instance>>} */\n        this.__recipes = new CallableHash()\n\n        /** @type {Object<string, string>} */\n        this.__aliasesHashMap = {}\n\n        /** @type {Resolver|null} */\n        this.__resolver = null\n    }\n\n    /**\n     * \n     * @param {string} name \n     * @param {object} clazz \n     * @param {Array<string>} dependencies\n     */\n    service(name, clazz, dependencies){\n        this.__define(new Recipe(name, dependencies, new NormalProvider(clazz)))\n    }\n\n    /**\n     * \n     * @param {string} name \n     * @param {string} preDefinedName \n     */\n    alias(name, preDefinedName){\n        this.__aliasesHashMap[name] = preDefinedName\n    }\n\n    resolve(){\n        const aliasRecipes = this.__resolveAliases()\n        this.__aliasesHashMap = {}\n        this.__recipes.putAll(aliasRecipes)\n        this.__resolver = new ResolverFactory().produce(this.__recipes)\n    }\n\n    /**\n     * \n     * @param {string} name \n     */\n    locate(name){\n        if(this.__resolver === null){\n            return null\n        }\n        return this.__resolver.create(name)\n    }\n\n    /**\n     * \n     * @param {Recipe<Instance>} recipe\n     */\n    __define(recipe){\n        this.__recipes.put(recipe)\n    }\n\n    /**\n     * @returns {Array<Recipe<Instance>>}\n     */\n    __resolveAliases(){\n        const recipes = Object.keys(this.__aliasesHashMap).map(aliasName => {\n            const preDefinedName = this.__aliasesHashMap[aliasName]\n            const recipe = this.__recipes.get(preDefinedName)\n            return new Recipe(aliasName, recipe.dependencies, recipe.provider)\n        })\n        return recipes\n    }\n}\n","import { NotImplementedError } from \"./throwable.js\";\n\n/**\n * @template T\n * @interface\n */\nexport class Factory{\n\n    /**\n     * @param {Array<Instance>} any\n     * @returns {T}\n     */\n    produce(...any){\n        throw new NotImplementedError()\n    }\n}\n","import { Provider } from \"./provider.js\"\n\n/**\n * @template T\n */\nexport class Ingredient {\n\n    /**\n     * \n     * @param {string} name\n     * @param {Array<Ingredient<Instance>>} dependencies\n     * @param {Provider<T>} provider\n     */\n    constructor(name, dependencies, provider){\n        this.name = name\n        this.dependencies = dependencies\n        this.provider = provider\n    }\n}\n\n\n","import { Constructable } from \"./constructable.js\"\nimport { NotImplementedError } from \"./throwable.js\"\n\n/**\n * @interface\n * @template T\n */\nexport class Provider {\n\n    /**\n     * @param {Array<Instance>} container // instance hashmap\n     * @returns {T}\n     */\n    produce(container){\n        throw new NotImplementedError()\n    }\n}\n\n/**\n * @implements {Provider<T>}\n * @template T\n */\nexport class SingletonProvider {\n\n    constructor(){\n        /** @type {T|null} */\n        this.cache = null\n    }\n\n    /** \n     * @param {Array<Instance>} container\n     * @returns {T}\n     */\n    produce(container){\n        if(this.cache === null){\n            this.cache = this.makeOnce(container)\n        }\n        return this.cache\n    }\n    \n    /**\n     * @abstract\n     * @param {Array<Instance>} container\n     * @returns {T}\n     */\n    makeOnce(container){\n        throw new NotImplementedError()\n    }\n}\n\n/**\n * @implements Provider<T>\n * @extends SingletonProvider<T>\n * @template T\n */\nexport class NormalProvider extends SingletonProvider {\n\n    /**\n     * \n     * @param {Constructable<T>} clazz \n     */\n    constructor(clazz){\n        super()\n        /**\n         * @param {Array<Instance>} container\n         */\n        this.recipe = (container) => {\n            //@ts-ignore\n            const binded = clazz.bind.apply(clazz, [null].concat(container))\n            return new binded()\n        }\n    }\n\n    /**\n     * @param {Array<Instance>} container\n     * @returns {T}\n     */\n    makeOnce(container){\n        return this.recipe(container)\n    }\n}\n","import { Ingredient } from \"./ingredient.js\"\nimport { CallableHash } from \"./callableHash\"\nimport { Provider } from \"./provider.js\"\nimport { IngredientLackError } from \"./throwable.js\"\n\n/**\n * @template T\n */\nexport class Recipe {\n\n    /**\n     * \n     * @param {string} name \n     * @param {Array<string>} dependencies \n     * @param {Provider<T>} provider \n     */\n    constructor(name, dependencies, provider){\n        this.name = name\n        this.dependencies = dependencies\n        this.provider = provider\n    }\n\n    /**\n     * \n     * @param {CallableHash<Ingredient<Instance>>} ingredients\n     * @returns {Ingredient<T>} \n     */\n    createIngredient(ingredients){\n        if(!this.isConstructableFrom(ingredients)){\n            throw new IngredientLackError()\n        }\n\n        const dependencyIngredients = this.dependencies.map(dependency => ingredients.get(dependency))\n        return new Ingredient(this.name, dependencyIngredients, this.provider)\n    }\n\n    /**\n     * @param {CallableHash<Ingredient<Instance>>} ingredients \n     * @returns {boolean}\n     */\n    isConstructableFrom(ingredients){\n        return this.dependencies.every(dependencyName => ingredients.exist(dependencyName))\n    }\n}\n","import { Factory } from \"./factory.js\";\nimport { Ingredient } from \"./ingredient.js\";\nimport { CallableHash } from \"./callableHash.js\";\nimport { Recipe } from \"./recipe.js\";\nimport { UnresolvedError, DuplicateNameError, IngredientNotFoundError, UnexpectedError } from \"./throwable.js\";\n\nexport class Resolver{\n    \n    /**\n     * \n     * @param {CallableHash<Ingredient<Instance>>} ingredients\n     */\n    constructor(ingredients){\n        \n        this.__ingredients = ingredients\n    }\n\n    /**\n     * \n     * @param {string} name \n     * @returns {Instance}\n     */\n    create(name){\n        const product = this.__ingredients.get(name)\n        /** @type {Array<Instance>} */\n        return this.__produce(product)\n    }\n\n    /**\n     * \n     * @param {Ingredient<T>} ingredient \n     * @returns {T}\n     * @template T\n     */\n    __produce(ingredient){\n        const sources = ingredient.dependencies.map(dependency => this.__produce(dependency))\n        return ingredient.provider.produce(sources)\n    }\n\n}\n\n/**\n * @implements Factory<Resolver>\n */\nexport class ResolverFactory {\n\n    constructor(){}\n\n    /**\n     * @param {CallableHash<Recipe<Instance>>} recipes \n     * @returns {Resolver}\n     */\n    produce(recipes) {\n\n        /** @type {CallableHash<Ingredient<Instance>>} */\n        const ingredients = new CallableHash()\n\n        const notResolvedRecipes = recipes.duplicate()\n\n        while(notResolvedRecipes.hasAny()){\n            const prevNotResolvedLen = notResolvedRecipes.size()\n\n            notResolvedRecipes.forEach(recipe => {\n\n                if(recipe.isConstructableFrom(ingredients)){\n                    ingredients.put(recipe.createIngredient(ingredients))\n                    notResolvedRecipes.delete(recipe.name)\n                }\n            })\n            \n            if (prevNotResolvedLen === notResolvedRecipes.size()){\n                throw new UnresolvedError()\n            }\n        }\n\n        return new Resolver(ingredients)\n    }\n}\n","export class NotImplementedError extends Error {\n\n    constructor() {\n        super(\"not implemented\");\n        this.name = \"NotImplementedError\";\n    }\n}\n\nexport class UnexpectedError extends Error {\n\n    constructor() {\n        super(\"internal error occured\");\n        this.name = \"UnexpectedError\";\n    }\n}\n\nexport class UnresolvedError extends Error {\n\n    constructor() {\n        super(\"there is circular reference or not defined reference\");\n        this.name = \"UnresolvedError\";\n    }\n}\n\nexport class IngredientNotFoundError extends Error {\n\n    constructor() {\n        super(\"ingredient not found\");\n        this.name = \"IngredientNotFoundError\";\n    }\n}\n\nexport class DuplicateNameError extends Error {\n\n    constructor() {\n        super(\"same name defined\");\n        this.name = \"DuplicateNameError\";\n    }\n}\n\nexport class IngredientLackError extends Error {\n\n    constructor() {\n        super(\"ingredient is lacked\");\n        this.name = \"IngredientLackError\";\n    }\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./index.js\");\n"],"sourceRoot":""}